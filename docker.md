# IT: Docker

![image](https://user-images.githubusercontent.com/2028330/197627245-f8a88511-f296-46c3-a078-b352943c494a.png)

Ещё одна тулза, с которой нынешним программистам, особенно бекенщикам, приходится сталкиваться -- это Докер. Его коротко и неправильно можно описать как средство для запуска программ в легковесных виртуальных машинах. Но давай подробнее с точки зрения "прикладного" программиста, то есть чувака, чья ответственность и головная боль заканчивается на создании программы, которую можно где-то запустить и которая выполняет свои функции.

Если мы возьмем программу на Java/Kotlin/Python, то есть такую, которая превращается в байткод, а не в исполняемый файл, то просто взять и запустить в произвольном месте результат работы компилятора, скорее всего, не получится.

Во-первых, в месте запуска может не быть используемых библиотек. Окей, с этим можно было побороться, либо включив библиотеки в комплект поставки, либо, в случае некоторых линуксов, записав зависимости от библиотек в инсталляторе, чтобы операционная система смогла их поставить.

Во-вторых, в месте запуска может не оказаться Java/Python Runtime. В 2000-х годах это было редкостью, тогда Java была на волне популярности и кажется даже OS X шла в комплекте с Java Runtime, но сейчас по умолчанию можно считать, что у пользователя нет ни Java ни Python, ни желания их ставить. Окей, с этим можно побороться тем же способом -- включив Java Runtime в комплект поставки или, в случае линуксов, указать зависимости. Кстати, во многом именно из-за этого нынешние приложения такие громоздкие. Мой GanttProject, например, программа сама по себе маленькая, но дистрибутив весит 110Mb, а на диске он занимает 200Mb. Все тащат с собой Java, Python, NodeJS и прочего черта в ступе.

Но тут выясняется, что и этого может оказаться недостаточно. Возможны терки между той версией библиотеки, которая нужна тебе и той, которая нужна не тебе. Возможно, что нужны какие-нибудь утилиты, которые не всегда есть. Возможно, что такого рода неприятности разные в разных окружениях, например у тебя на компе все норм, потому что ты когда поставил какую-то чертову библиотеку, в старом продакшне тоже было норм по этой же причине, а вот в новом, куда внезапно среди ночи пришлось мигрировать не норм, и непонятно, как пофиксить.

Хотелось бы, чтоб был комплект поставки, который, сцуко, запустится в любом окружении в котором выполнены минимальные требования. Впихни туда все свои библиотеки, рантаймы, нужных тебе версий, если надо запихать туда операционную систему -- впихни всю операционную систему, черт возьми!

![image](https://user-images.githubusercontent.com/2028330/197626318-14858f35-9695-4c5f-82d7-2a42c1e8354e.png)

И тут как нельзя кстати подъехала технология контейнеризации на линуксах. Это большая сложная вещь со многими функциями, но суть в том, что она позволяет создать для исполняемой программы иллюзию, что она одна и никого больше нет. Что у неё свой собственный экземпляр файловой системы, своя собственная сеть, процессор, изолированные от остальных программ, выполняющихся на этой же машине. 

Для удобного использования контейнеризации появился продукт Docker, который позволяет как раз таки собрать "образ", в который впизнута действительно почти вся нужная операционная система. И теперь программист, собрав докер-образ, может якобы запускать его одинаковым образом и у себя на машине, и в продакшне, и в другом продакшне, везде где есть этот самый Докер.

До недавнего времени, кстати, он по-хорошему был считай что только на Линуксе и немного macOS, а на винде не был. Но сейчас вроде есть и на винде.

Всех проблем эта технология не решает, но большинство решает, и пользоваться этим действительно удобно. Помимо того что приложение удобно распространять, еще удобно поднимать разные конфигурации прямо у себя на машине. Например, легко и просто тестировать свой бекенд с разными версиями базы данных на одной и той же машине, что без использования докера -- задача далеко не тривиальная.

Так что уметь в докер примерно так же важно, как и уметь в базы данных.
